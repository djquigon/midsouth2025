(function(){"use strict";var e={3140:function(e,t,a){var i=a(3751),s=a(641);const o={class:"content-row"},n={class:"columns"},r={class:"column one-third"},l={class:"column two-thirds"};function c(e,t,a,i,c,d){const g=(0,s.g2)("SearchForm"),u=(0,s.g2)("LocationListings"),_=(0,s.g2)("GoogleMap");return(0,s.uX)(),(0,s.CE)("div",o,[(0,s.Lk)("div",n,[(0,s.Lk)("div",r,[(0,s.bF)(g,{search_term:d.getSearchTerm},null,8,["search_term"]),(0,s.bF)(u,{active_listings:d.getActiveListings,is_search_results_empty:d.getSearchResultsStatus},null,8,["active_listings","is_search_results_empty"])]),(0,s.Lk)("div",l,[(0,s.bF)(_)])]),t[0]||(t[0]=(0,s.Lk)("span",{class:"row-settings","data-column-count":"two","data-column-width":"variable","data-column-gap":"none"},[(0,s.Lk)("span",{class:"validator-text","data-nosnippet":""},"row settings")],-1))])}const d={id:"map"};function g(e,t,a,i,o,n){return(0,s.uX)(),(0,s.CE)("div",d)}a(4114);var u=a(953);const _=(0,u.Kh)({google:window.google,places_API:"",all_listings:[],all_active_listings:[],coordinates_returned_via_search_string:[],is_search_results_empty:!1}),h=()=>{_.all_active_listings=[]},p=()=>{j.closeAllInfoWindows(),h(),_.is_search_results_empty=!1,document.getElementById("search-by-string").value="",_.all_active_listings=_.all_listings,m(),j.resetAllMarkerIcons(),j.showAllMarkers(),j.centerMapAtDefaultPosition(j.state.active_map)},m=()=>{var e=document.getElementsByClassName("location-listing");for(let t=0;t<e.length;t++)e[t].setAttribute("data-active","false")},f=async e=>{if(/^\d{5}(-\d{4})?$/.test(e))var t="postal_code";else t="locality";const a={textQuery:e,fields:["displayName","location"],includedType:t,useStrictTypeFiltering:!0,language:"en-US",maxResultCount:1};try{const{places:e}=await _.places_API.Place.searchByText(a);var i="";for(let t=0;t<e.length;t++){i=e[t].Eg.location;break}return void(_.coordinates_returned_via_search_string=i)}catch{alert("Something went wrong with your search")}},v=(e,t)=>{for(let a=0;a<_.all_listings.length;a++){const i=_.all_listings[a].latitude,s=_.all_listings[a].longitude,o=N.haversineDistance([e.lat,e.lng],[i,s]).toFixed(2);_.all_listings[a].distance_from_searched_location=o,_.all_listings[a].distance_from_searched_location<=t&&_.all_active_listings.push(_.all_listings[a])}},w=async()=>{try{await new Promise(((e,t)=>{e(N.getUserGeoLocation())})),j.closeAllInfoWindows(),j.resetAllMarkerIcons(),j.centerMapAroundLocation(N.state.user_geolocation),m(),h(),await y(_.all_listings,N.state.user_geolocation),j.openNearestInfoWindow();var e=_.all_active_listings[0].place_id;for(let a=0;a<j.state.all_markers.length;a++)if(j.state.all_markers[a].place_id===e){var t=j.state.all_markers[a];break}j.activateMarkerIcon(t);var a=document.getElementById("location-listings").firstElementChild;a.setAttribute("data-active","true"),document.getElementById("location-listings").scrollTo({top:a.offsetTop,left:0,behavior:"smooth"})}catch(i){alert(i)}},b=e=>{for(let t=0;t<e.length;t++)_.all_listings.push(e[t]),_.all_active_listings.push(e[t])},k=()=>{const e=document.getElementById("search-by-string"),t={componentRestrictions:{country:["us"]},types:["(cities)"],fields:["address_components"]};new google.maps.places.Autocomplete(e,t)},y=(e,t)=>{for(let a=0;a<e.length;a++){const i=e[a].latitude,s=e[a].longitude,o=N.haversineDistance([t.coords.latitude,t.coords.longitude],[i,s]).toFixed(2);e[a].distance_from_user=o,_.all_active_listings.push(e[a])}_.all_active_listings=_.all_active_listings.sort(E)},L=async e=>{if(e.length>0)try{h(),j.closeAllInfoWindows(),j.resetAllMarkerIcons(),j.showAllMarkers(),_.coordinates_returned_via_search_string=[],_.no_results=!1,_.is_search_results_empty=!1,await f(e),v(_.coordinates_returned_via_search_string,25),j.getMarkersInSearchRadius(_.coordinates_returned_via_search_string,25),_.all_active_listings=_.all_active_listings.sort(A),_.coordinates_returned_via_search_string?j.state.active_map.setCenter(_.coordinates_returned_via_search_string):j.centerMapAtDefaultPosition,0===_.all_active_listings.length&&(_.is_search_results_empty=!0)}catch{alert("Something went wrong with your search")}},A=(e,t)=>e.distance_from_searched_location-t.distance_from_searched_location,E=(e,t)=>e.distance_from_user-t.distance_from_user,M=(e,t=!0)=>{var a=document.querySelector('[data-wp-id="'+e+'"]');a.setAttribute("data-active","true"),t&&document.getElementById("location-listings").scrollTo({top:a.offsetTop,left:0,behavior:"smooth"})},S={state:_,clearActiveListings:h,clearLocationsSearch:p,deactivateAllListings:m,findNearestLocation:w,initializeGoogleAutocomplete:k,initializeLocationListings:b,searchByString:L,toggleActiveListing:M},I=(0,u.Kh)({google:window.google,user_geolocation:"",user_location_string:""}),C=async()=>{let e=!1;try{e=await new Promise(((e,t)=>{navigator.geolocation.getCurrentPosition(e,t,{timeout:5e3})})),I.user_geolocation=e,B(I.user_geolocation)}catch{alert('The "Find Nearest" feature requires granting us access to your location.'),j.hideAllMarkers(),S.state.is_search_results_empty=!0}return e},B=e=>{if(e){const t=new I.google.maps.Geocoder,a=new I.google.maps.LatLng(parseFloat(e.coords.latitude),parseFloat(e.coords.longitude));t.geocode({latLng:a},((e,t)=>{if(t===I.google.maps.GeocoderStatus.OK){const t=e[0].address_components[2].short_name,a=e[0].address_components[4].short_name,i=e[0].address_components[6].short_name,s=`${t}, ${a} ${i}`;I.user_location_string=s}else alert(`Error finding location: ${t}`)}))}return I.user_location_string},F=([e,t],[a,i],s=!0)=>{const o=e=>Math.PI/180*e,n=(e,t)=>Math.PI/180*(e-t),r=6371,l=n(a,e),c=n(i,t);e=o(e),a=o(a);const d=Math.pow(Math.sin(l/2),2)+Math.pow(Math.sin(c/2),2)*Math.cos(e)*Math.cos(a),g=2*Math.asin(Math.sqrt(d));let u=r*g;return s&&(u/=1.60934),u},N={state:I,getUserGeoLocation:C,getUserLocationString:B,haversineDistance:F},x=(0,u.Kh)({google:window.google,active_map:"",all_markers:[],all_info_windows:[]}),T=e=>{var t=e.childNodes[0].getAttribute("data-icon-active-url"),a=e.childNodes[0].getAttribute("data-icon-active-width"),i=e.childNodes[0].getAttribute("data-icon-active-height");e.childNodes[0].setAttribute("src",t),e.childNodes[0].setAttribute("width",a),e.childNodes[0].setAttribute("height",i)},P=async e=>{var t={lat:e.coords.latitude,lng:e.coords.longitude};x.active_map.setCenter(t)},X=e=>{e.fitBounds(V.state.map_bounds)},$=()=>{for(let e=0;e<x.all_info_windows.length;e++)x.all_info_windows[e].close()},O=(e,t)=>{for(let a=0;a<x.all_markers.length;a++){const i=x.all_markers[a].position.lat,s=x.all_markers[a].position.lng,o=N.haversineDistance([e.lat,e.lng],[i,s]).toFixed(2);x.all_markers[a].distance_from_searched_location=o,x.all_markers[a].distance_from_searched_location>t&&(x.all_markers[a].hidden=!0)}},W=()=>{for(let e=0;e<x.all_markers.length;e++)!1===x.all_markers[e].hidden&&(x.all_markers[e].hidden=!0)},G=(e,t,a,i)=>{e.addListener("gmp-click",(()=>{$(),Q(),t.open({anchor:e,map:i}),T(e),S.deactivateAllListings(),S.toggleActiveListing(a.wp_id,!0)}))},D=e=>{$(),S.deactivateAllListings(),Q();var t=e.target.parentNode.parentNode;t.setAttribute("data-active","true");var a=t.getAttribute("data-place-id");for(let s=0;s<x.all_markers.length;s++)if(x.all_markers[s].place_id===a){var i=x.all_markers[s];break}T(i);for(let s=0;s<x.all_info_windows.length;s++)if(x.all_info_windows[s].content.includes(a)){x.all_info_windows[s].open({anchor:i,map:map});break}},z=()=>{const e=S.state.all_active_listings[0],t=e.place_id;for(let s=0;s<x.all_markers.length;s++)if(x.all_markers[s].place_id===t){var a=x.all_markers[s];break}var i=x.active_map;for(let s=0;s<x.all_info_windows.length;s++)if(x.all_info_windows[s].content.indexOf(t.toString())>-1){x.all_info_windows[s].open({anchor:a,map:i});break}},Q=()=>{for(let s=0;s<x.all_markers.length;s++){var e=x.all_markers[s].childNodes[0],t=e.getAttribute("data-icon-default-url"),a=e.getAttribute("data-icon-default-width"),i=e.getAttribute("data-icon-default-height");e.setAttribute("src",t),e.setAttribute("width",a),e.setAttribute("height",i)}},U=()=>{for(let e=0;e<x.all_markers.length;e++)!0===x.all_markers[e].hidden&&(x.all_markers[e].hidden=!1)},j={state:x,activateMarkerIcon:T,centerMapAroundLocation:P,centerMapAtDefaultPosition:X,closeAllInfoWindows:$,getMarkersInSearchRadius:O,hideAllMarkers:W,markerClickEvent:G,openInfoWindowFromListingToggle:D,openNearestInfoWindow:z,resetAllMarkerIcons:Q,showAllMarkers:U},q=(0,u.Kh)({google:window.google,map_bounds:"",map_options:{}}),H=e=>{q.map_bounds=new google.maps.LatLngBounds,q.map_options={center:q.map_bounds.getCenter(),draggable:!0,scrollwheel:!1,zoom:10,minZoom:4,maxZoom:16,streetViewControl:!1,panControl:!0,zoomControl:!0,gestureHandling:"cooperative",mapId:"3b1021aabdb80672"};const t=new V.state.google.maps.Map(document.getElementById("map"),q.map_options);j.state.active_map=t,R(e,t),t.fitBounds(V.state.map_bounds),q.google.maps.visualRefresh=!0},K=e=>{var t="",a="",i="",s="",o="",n="",r="",l="",c="<ul>";e.name&&(t='<li class="location-name"><h2 class="h3">'+e.name+"</h2></li>"),e.place_id&&(a='<li class="location-place-id visually-hidden">'+e.place_id+"</li>"),e.address&&e.place_id&&(i='<li class="location-address"><strong>Address: </strong><a href="https://www.google.com/maps/place/?q=place_id:'+e.place_id+'" target="_blank">'+e.address+"</a></li>"),e.phone&&(s='<li class="location-phone"><strong>Phone: </strong><a href="tel:'+e.phone+'">'+e.phone+"</a></li>"),e.email&&(o='<li class="location-email"><strong>Email: </strong><a href="mailto:'+e.email+'">'+e.email+"</a></li>"),e.hours&&(n='<li class="location-hours"><strong>Hours: </strong>'+e.hours+"</li>"),e.website&&(r='<li class="location-website"><a class="button" href="'+e.website+'" target="_blank">View Website</a></li>'),e.wp_link&&(l='<li class="location-wp-link"><a class="button" href="'+e.wp_link+'">View Location</a></li>');var d="</ul>",g=c+t+a+i+s+o+n+r+l+d;return g},R=(e,t)=>{for(let o=0;o<e.length;o++){q.map_bounds.extend({lat:parseFloat(e[o].latitude),lng:parseFloat(e[o].longitude)});var a=document.createElement("img");a.classList.add("advanced-pin"),a.setAttribute("src",e[o].icon_default),a.setAttribute("alt",e[o].name),a.setAttribute("width",44),a.setAttribute("height",44),a.setAttribute("data-icon-default-url",e[o].icon_default),a.setAttribute("data-icon-default-width",44),a.setAttribute("data-icon-default-height",44),a.setAttribute("data-icon-active-url",e[o].icon_active),a.setAttribute("data-icon-active-width",56),a.setAttribute("data-icon-active-height",56);var i=new google.maps.marker.AdvancedMarkerElement({map:t,position:{lat:parseFloat(e[o].latitude),lng:parseFloat(e[o].longitude)},title:e[o].name,content:a});i.place_id=e[o].place_id,j.state.all_markers.push(i);var s=new google.maps.InfoWindow({content:K(e[o]),ariaLabel:e[o].name});j.state.all_info_windows.push(s),j.markerClickEvent(i,s,e[o],t)}},V={state:q,initializeMap:H};var Z={name:"GoogleMap",data(){return{google:window.google,locations:window.the_locations}},async mounted(){const{Map:e}=await google.maps.importLibrary("maps"),{AdvancedMarkerElement:t}=await google.maps.importLibrary("marker"),{LatLngBounds:a}=await google.maps.importLibrary("core");V.initializeMap(this.locations)}},Y=a(6262);const J=(0,Y.A)(Z,[["render",g]]);var ee=J;const te={class:"form-fields"},ae={class:"form-heading"},ie=["innerHTML"],se={key:1},oe={class:"find-nearest"},ne={class:"search-by-string"};function re(e,t,a,o,n,r){return(0,s.uX)(),(0,s.CE)("form",{id:"location-search-form",role:"search",onSubmit:t[2]||(t[2]=(0,i.D$)(((...e)=>r.searchByString&&r.searchByString(...e)),["prevent"]))},[(0,s.Lk)("ul",te,[(0,s.Lk)("li",ae,[r.getUserLocationString()?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[t[3]||(t[3]=(0,s.Lk)("h2",null,"Search by Your Location:",-1)),(0,s.Lk)("h3",{innerHTML:r.getUserLocationString()},null,8,ie)],64)):((0,s.uX)(),(0,s.CE)("h2",se,"Search by Your Location"))]),(0,s.Lk)("li",oe,[(0,s.Lk)("button",{id:"find-nearest-location",class:"button",type:"button",onClick:t[0]||(t[0]=(...e)=>r.findNearestLocation&&r.findNearestLocation(...e))}," Find Nearest "),t[4]||(t[4]=(0,s.Lk)("label",{for:"find-nearest-location"},' The "Find Nearest" feature requires granting us access to your location. ',-1))]),(0,s.Lk)("li",ne,[t[5]||(t[5]=(0,s.Lk)("label",{for:"search-by-string"}," Search by City & State, or Zip ",-1)),t[6]||(t[6]=(0,s.Lk)("input",{id:"search-by-string",type:"text"},null,-1)),t[7]||(t[7]=(0,s.Lk)("button",{id:"submit-search",class:"button",type:"submit"}," Search ",-1)),(0,s.Lk)("button",{id:"clear-search",class:"button",type:"button",onClick:t[1]||(t[1]=(...e)=>r.clearLocationsSearch&&r.clearLocationsSearch(...e))}," View All ")])])],32)}var le={name:"SearchForm",props:{search_term:{type:String}},data(){return{google:window.google,locations:window.the_locations}},setup(){},methods:{clearLocationsSearch(){S.clearLocationsSearch()},findNearestLocation(){S.findNearestLocation()},getUserLocationString(){return N.getUserLocationString()},searchByString(){S.searchByString(document.getElementById("search-by-string").value)}},async mounted(){S.state.places_API=await google.maps.importLibrary("places"),S.initializeGoogleAutocomplete(),this.search_term.length>0&&(document.getElementById("search-by-string").value=this.search_term,S.searchByString(document.getElementById("search-by-string").value))}};const ce=(0,Y.A)(le,[["render",re]]);var de=ce,ge=a(33);const ue={id:"location-listings"},_e=["data-wp-id","data-place-id"],he={class:"listing-name"},pe=["aria-controls"],me=["id"],fe={key:0,class:"address"},ve=["href"],we={key:1,class:"phone"},be=["href"],ke={key:2,class:"email"},ye=["href"],Le={key:3,class:"hours"},Ae=["innerHTML"],Ee={key:4,class:"website"},Me=["href"],Se={class:"directions-button"},Ie=["href"],Ce={key:0,class:"single-view-button"},Be=["href"],Fe={key:0,class:"no-results"};function Ne(e,t,a,i,o,n){return(0,s.uX)(),(0,s.CE)("ul",ue,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.active_listings,(e=>((0,s.uX)(),(0,s.CE)("li",{class:"location-listing",key:e.wp_id,"data-wp-id":e.wp_id,"data-place-id":e.place_id,"data-active":"false"},[(0,s.Lk)("h3",he,[(0,s.Lk)("button",{class:"toggle-trigger","aria-expanded":"false","aria-controls":`listing-info-toggle-${e.wp_id}`,onClick:t[0]||(t[0]=(...e)=>n.toggleListingInfo&&n.toggleListingInfo(...e))},(0,ge.v_)(e.name),9,pe)]),(0,s.Lk)("ul",{class:"listing-info-toggle",id:`listing-info-toggle-${e.wp_id}`,"aria-hidden":"true"},[e.place_id?((0,s.uX)(),(0,s.CE)("li",fe,[t[1]||(t[1]=(0,s.eW)(" Address: ")),(0,s.Lk)("a",{href:`https://www.google.com/maps/place/?q=place_id:${e.place_id}`,target:"_blank"},(0,ge.v_)(e.address),9,ve)])):(0,s.Q3)("",!0),e.phone?((0,s.uX)(),(0,s.CE)("li",we,[t[2]||(t[2]=(0,s.eW)(" Phone: ")),(0,s.Lk)("a",{href:`tel:${e.phone}`},(0,ge.v_)(e.phone),9,be)])):(0,s.Q3)("",!0),e.email?((0,s.uX)(),(0,s.CE)("li",ke,[t[3]||(t[3]=(0,s.eW)(" Email: ")),(0,s.Lk)("a",{href:`mailto:${e.email}`},(0,ge.v_)(e.email),9,ye)])):(0,s.Q3)("",!0),e.hours?((0,s.uX)(),(0,s.CE)("li",Le,[t[4]||(t[4]=(0,s.Lk)("span",{class:"label"},"Hours:",-1)),(0,s.Lk)("span",{innerHTML:`${e.hours}`},null,8,Ae)])):(0,s.Q3)("",!0),e.website?((0,s.uX)(),(0,s.CE)("li",Ee,[(0,s.Lk)("a",{href:`${e.website}`,target:"_blank"},"View Website",8,Me)])):(0,s.Q3)("",!0)],8,me),(0,s.Lk)("span",Se,[(0,s.Lk)("a",{href:`https://www.google.com/maps/place/?q=place_id:${e.place_id}`,target:"_blank"}," Get Directions ",8,Ie)]),e.wp_link?((0,s.uX)(),(0,s.CE)("span",Ce,[(0,s.Lk)("a",{href:`${e.wp_link}`}," View Location ",8,Be)])):(0,s.Q3)("",!0)],8,_e)))),128)),a.is_search_results_empty?((0,s.uX)(),(0,s.CE)("li",Fe,t[5]||(t[5]=[(0,s.Lk)("h3",null,"No results to display",-1)]))):(0,s.Q3)("",!0)])}var xe={name:"LocationListings",props:{active_listings:{type:Object},is_search_results_empty:{type:Boolean}},data(){return{google:window.google,locations:window.the_locations}},methods:{toggleListingInfo(e){"false"===e.target.ariaExpanded?(e.target.ariaExpanded="true",j.openInfoWindowFromListingToggle(e)):e.target.ariaExpanded="false";var t=e.target.attributes[2].value,a=document.getElementById(t);"true"===a.getAttribute("aria-hidden")?a.setAttribute("aria-hidden","false"):a.setAttribute("aria-hidden","true")}},async mounted(){S.initializeLocationListings(this.locations)}};const Te=(0,Y.A)(xe,[["render",Ne]]);var Pe=Te,Xe={name:"LocationsMap",components:{GoogleMap:ee,SearchForm:de,LocationListings:Pe},data(){return{}},setup(){return{}},methods:{},computed:{getActiveListings(){return S.state.all_active_listings},getSearchResultsStatus(){return S.state.is_search_results_empty},getSearchTerm(){return window.search_term}},created(){},async mounted(){}};const $e=(0,Y.A)(Xe,[["render",c]]);var Oe=$e;document.getElementById("locations-map")&&(0,i.Ef)(Oe).mount("#locations-map")}},t={};function a(i){var s=t[i];if(void 0!==s)return s.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,i,s,o){if(!i){var n=1/0;for(d=0;d<e.length;d++){i=e[d][0],s=e[d][1],o=e[d][2];for(var r=!0,l=0;l<i.length;l++)(!1&o||n>=o)&&Object.keys(a.O).every((function(e){return a.O[e](i[l])}))?i.splice(l--,1):(r=!1,o<n&&(n=o));if(r){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[i,s,o]}}(),function(){a.d=function(e,t){for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,i){var s,o,n=i[0],r=i[1],l=i[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(s in r)a.o(r,s)&&(a.m[s]=r[s]);if(l)var d=l(a)}for(t&&t(i);c<n.length;c++)o=n[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(d)},i=self["webpackChunkmandr_vue_app"]=self["webpackChunkmandr_vue_app"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=a.O(void 0,[504],(function(){return a(3140)}));i=a.O(i)})();